<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
        <%= (typeof title !=='undefined' ? title : 'dev.trmarvin' ) %>
    </title>

    <link rel="stylesheet" href="/css/tokens.css" />
    <link rel="stylesheet" href="/css/base.css" />
    <link rel="stylesheet" href="/css/components.css" />
    <link rel="stylesheet" href="/css/pages.css" />

    <!-- Optional per-page CSS -->
    <% if (typeof pageCSS !=='undefined' && Array.isArray(pageCSS)) { pageCSS.forEach(href=> { %>
        <link rel="stylesheet" href="<%= href %>" />
        <% }) } %>
</head>

<body>
  
<header class="site-header">
    <div class="container header-inner">
        <!-- 1) Left -->
        <a class="logo" href="/">dev.trmarvin</a>

        <!-- 2) Center -->
        <nav id="site-nav" class="nav" aria-label="Primary">
            <ul>
                <% const navItems=[ { href: '/' , label: 'Home' }, { href: '/blog' , label: 'Blog' }, {
                    href: '/projects' , label: 'Projects' }, { href: '/about' , label: 'About' }, ]; %>
                    <% navItems.forEach(item=> {
                        const isActive = path === item.href || (item.href !== '/' && path.startsWith(item.href));
                        %>
                        <li>
                            <a href="<%= item.href %>" class="<%= isActive ? 'active' : '' %>" <%=isActive
                                ? 'aria-current="page"' : '' %>>
                                <%= item.label %>
                            </a>
                        </li>
                        <% }) %>
            </ul>
        </nav>

        <!-- 3) Right -->
        <div class="header-actions">
            <button class="theme-toggle" aria-label="Toggle theme">◐</button>
            <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav"
                aria-label="Toggle navigation">☰</button>
        </div>
    </div>
</header>


    <main class="container">
        <%- body %> <!-- required by express-ejs-layouts -->
    </main>

    <script src="/js/nav.js" defer></script>
    <script src="/js/theme.js" defer></script>

    <!-- Optional per-page scripts -->
    <% if (typeof pageScripts !=='undefined' && Array.isArray(pageScripts)) { pageScripts.forEach(src=> { %>
        <script src="<%= src %>" defer></script>
        <% }) } %>
</body>

</html>