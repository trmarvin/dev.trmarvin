<% // Optional: override <title> and body class if your layout uses these:
    const pageTitle = typeof title !== 'undefined' ? title : 'Projects • dev.trmarvin';
    const pageBodyClass = typeof bodyClass !== 'undefined' ? bodyClass : 'page-projects';
    %>

    <!-- Main Projects Page -->
    <section class="page page-projects">

        <header class="page-header">
            <h1 class="page-title">Projects</h1>
            <p class="page-intro">
                Selected development and design work. Click through for tech stacks, process notes, and code links.
            </p>
        </header>

        <% if (projects && projects.length) { %>
            <section class="projects-grid">
                <% projects.forEach(project=> { %>
                    <article class="project-card">
                        <a class="project-media" href="/projects/<%= project.slug %>">
                            <% if (project.thumbnail_url) { %>
                                <img src="<%= project.thumbnail_url %>" alt="<%= project.title %> thumbnail"
                                    loading="lazy">
                                <% } else { %>
                                    <div class="project-card__media-placeholder">
                                        <span>dev.trmarvin</span>
                                    </div>
                                    <% } %>
                        </a>


                        <div class="project-card__body">
                            <h2 class="project-card__title">
                                <a href="/projects/<%= project.slug %>">
                                    <%= project.title %>
                                </a>
                            </h2>

                            <% if (project.subtitle) { %>
                                <p class="project-card__subtitle">
                                    <%= project.subtitle %>
                                </p>
                                <% } %>

                                    <% if (project.excerpt) { %>
                                        <p class="project-card__excerpt">
                                            <%= project.excerpt %>
                                        </p>
                                        <% } else if (project.summary) { %>
                                            <p class="project-card__excerpt">
                                                <%= project.summary %>
                                            </p>
                                            <% } %>

                                                <ul class="project-card__meta">
                                                    <% if (project.year) { %>
                                                        <li class="project-card__meta-item">
                                                            <span class="meta-label">Year</span>
                                                            <span class="meta-value">
                                                                <%= project.year %>
                                                            </span>
                                                        </li>
                                                        <% } %>

                                                            <% if (project.type) { %>
                                                                <li class="project-card__meta-item">
                                                                    <span class="meta-label">Type</span>
                                                                    <span class="meta-value">
                                                                        <%= project.type %>
                                                                    </span>
                                                                </li>
                                                                <% } %>

                                                                    <% if (project.stack && project.stack.length) { %>
                                                                        <li class="project-card__meta-item">
                                                                            <span class="meta-label">Stack</span>
                                                                            <span class="meta-value">
                                                                                <%= project.stack.join(', ') %>
                  </span>
                </li>
              <% } %>
            </ul>

            <div class="project-card__actions">
              <a href="/projects/<%= project.slug %>" class="btn-text">
                Read case study →
              </a>

              <% if (project.repo_url) { %>
                <a href="<%= project.repo_url %>" class="btn-text" target="_blank" rel="noreferrer">
                  View code
                </a>
              <% } %>

              <% if (project.live_url) { %>
                <a href="<%= project.live_url %>" class="btn-text" target="_blank" rel="noreferrer">
                  Visit site
                </a>
              <% } %>
            </div>
          </div>
        </article>
      <% }); %>
    </section>
  <% } else { %>
    <section class="empty-state">
      <h2>No projects yet</h2>
      <p>
        Once you add projects in your admin, they’ll show up here as case studies.
      </p>
    </section>
  <% } %>

</section>